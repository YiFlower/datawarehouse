# datawarehouse
## 一、离线数仓

### （一）业务需求

#### 1. 报表需求

作为中国最受欢迎的在线旅游平台（OTP）之一，飞猪旅行始终坚持以产品和服务的创新，满足消费者日益个性化、多元化的需求。业务系统经过长期发展，积累了大量行为数据与客户、商品维度数据 。 为了掌握运营的整体情况，对公司的发展提供决策支持，业务提出了报表需求，对数据进行统计汇总，将枯燥的数据转化为可以更加直观的分析图表图形 ，并对图表进行直观的对比。

#### 2. 数据分析

作为中国最受欢迎的在线旅游平台（OTP）之一，飞猪旅行始终坚持以产品和服务的创新，满足消费者日益个性化、多元化的需求。业务系统经过长期发展，积累了大量行为数据与客户、商品维度数据 。 为了分析客户的行为，挖掘潜在需求，业务提出了数据分析需求，对数据进行统计汇总，将枯燥的数据转化为可以更加直观的分析图表图形 ，并对图表进行直观的对比。

### （二）设计概述

#### 1. 业务架构设计

![1651321814775](C:\Users\Y1Flower\AppData\Local\Temp\1651321814775.png)



#### 2. 数据流程设计

![1651321823172](C:\Users\Y1Flower\AppData\Local\Temp\1651321823172.png)



#### 3. 命名设计

##### （1）表名命名设计

表名由以下组成：

数据所属层级：ODS、DWD、DWS等；

业务/系统名：根据系统命名，如订单；

表内涵：表数据内容描述；

维度/事实：维度使用DIM表示，事实使用FACT表示；

加载方式：D：每天，M：月，Y：年，一次性加载不作区分；

增/全量：增量使用I，全量使用H。

数据所属层级、业务/系统名、表内涵、维度/事实、加载方式之间使用下划线连接，加载方式、增/全量之间不做分割。如ods_order_user_behavior_fact_di，表示每天增量同步的用户行为表，ods_order_user_dim_dh，表示每天同步全量的用户维度表。

##### （2）程序命名设计

程序名由以下组成：

程序作用层级：ODS、DWD、DWS等；

程序功能：extract：抽取、transform：转换、load：加载 ；

程序语言：Java、Scala、Shell等；

调度频率：D：每天，M：月，Y：年；

是否需要参数：Y：是，N：否；

程序编号：三位，从001开始；

程序作用层级、程序功能、程序语言之间使用下划线连接，调度频率、是否需要参数之间不做分割。如ods_extract_shell_dy_001，表示抽取到ODS层的Shell脚本程序，每天运行一次，需要传入参数；dwd_transform_scala_dn_001，表示转换到DWD层的Scala语言程序，每天运行一次，不需要参数。

来源表、目标表、程序入参、调度说明等，需要编写到程序的注释说明中，并同步到数仓管理中。

#### 4. 维度/事实划分

维度划分需要结合主题域划分，根据



### （三）项目开发

#### 1. 数据落盘





#### 2. ODS层开发





#### 3. DWD层开发





#### 4. DWS层开发





#### 5. APP层开发





#### 6. 报表开发





#### 7. 调度开发





### （四）数仓管理

#### 1. 元数据管理

##### （1）表元数据管理



##### （2）数仓映射管理



##### （3）数仓程序管理





#### 2. 数仓权限管理





## 二、实时数仓与Lambda架构

</>



## 三、数据湖与流批一体

</>



